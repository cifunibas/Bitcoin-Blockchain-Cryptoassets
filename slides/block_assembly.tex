% Choose one to switch between slides and handout
\documentclass[]{beamer}
%\documentclass[handout]{beamer}

% Video Meta Data
\title{Bitcoin, Blockchain and Cryptoassets}
\subtitle{Block Assembly \& Chain Structure}
\author{Prof. Dr. Fabian Sch√§r}
\institute{University of Basel}

% Config File
\input{../config/config.tex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

\thispagestyle{empty}
\begin{frame}[noframenumbering]
	\titlepage
\end{frame}

%%%
\begin{frame}{Transaction Distribution}
\begin{figure}
	\centering
	\begin{tikzpicture}[scale=0.9, every node/.style={scale=0.9}]
		\input{../assets/figures/transaction_distribution}
	\end{tikzpicture}
\end{figure}
\end{frame}
%%%	


%%%
\begin{frame}{From Transactions to Blocks}
	\begin{enumerate}
		\item<1-> Node sends his transaction to the connected peers.
		\item<1-> Each node verifies the received transaction
			\begin{itemize}
				\item<1-> Inputs, Outputs, Signatures
			\end{itemize}			 
		\item<1-> If the transaction is valid, it is \dots
			\begin{itemize}
				\item<1-> \dots forwarded to respective peers.
				\item<1-> \dots stored in own transaction mempool
			\end{itemize}
	\end{enumerate}	
	\vspace{1em}
	\uncover<1->{Miners will take the transactions (with the highest fees) from their mempool and form a block, but how is this done?}
\end{frame}
%%%

%%%
\begin{frame}{Merkle Root}
	\begin{columns}
	\column{0.7\textwidth}
		\begin{figure}
			\input{../assets/figures/merkle_tree}
		\end{figure}
		\begin{itemize}
			\item Represents all transactions of the block in the form of a compact 256-bit entry.
			\item Guarantees that the transaction data of a block cannot be modified unnoticed.
		\end{itemize}
	\column{0.3\textwidth}
		\begin{figure}
			\input{../assets/figures/block_content_1}
		\end{figure}
	\end{columns}
\end{frame}
%%%


%%%
\begin{frame}{Version, Reference \& Timestamp}
	\begin{columns}
	\column{0.7\textwidth}
		\begin{itemize}
			\item \textbf{Version:} Followed ruleset of block creation, implicates validation rules.
			\item \textbf{Reference:} Hash value of predecessor block header $\rightarrow$ Basis for chain structure.
			\item \textbf{Timestamp:} At least median timestamp of the previous eleven blocks, not more than two hours in the future at the time of inclusion in the blockchain. 
		\end{itemize}
	\column{0.3\textwidth}
		\begin{figure}
			\input{../assets/figures/block_content_2}
		\end{figure}
	\end{columns}
\end{frame}
%%%


%%%
\begin{frame}{Threshold and Nonce}
	\begin{columns}
	\column{0.7\textwidth}
		\begin{itemize}
			\item \textbf{Threshold:} Shows the maximum hash value a block header may have in order to be considered valid by the network and become part of the blockchain.
			\item \textbf{Nonce:} Primary source of variation in block creation. Ensures that blocks with otherwise equivalent content can nevertheless have different hash values.
		\end{itemize}
	\column{0.3\textwidth}
		\begin{figure}
			\input{../assets/figures/block_content_3}
		\end{figure}
	\end{columns}
\end{frame}
%%%


%%%
\begin{frame}{Meta Data}
	\begin{columns}
	\column{0.6\textwidth}
		\begin{tabular}{l|l}
			\textbf{Type} & \textbf{Use} \\
			\hline
			Time, Mediantime & Timestamped data \\
			Difficulty & Proof of Work \\
			Chainwork & Consensus \\
			Size, \# of TRX & Scalability
		\end{tabular}
	\column{0.4\textwidth}
		\begin{figure}
			\begin{tikzpicture}[domain=-8:8,scale=1.2, every node/.style={scale=1.2}]
  				\input{../assets/figures/block_content_full}
  			\end{tikzpicture}
			\end{figure}
	\end{columns}
\end{frame}
%%%


%%%
\begin{frame}{Block Height and -Depth}
	\begin{figure}
		\input{../assets/figures/block_id}
	\end{figure}
\textbf{Block Identification:}
	\begin{itemize}
 		\item Block Height (static, not unique in case of fork)
 		\item Block Depth (dynamic)
 		\item Block Header hash value / Block ID (static)
	\end{itemize}
\end{frame}
%%%


%%%
\begin{frame}{The Domino Effect 1}
	\begin{figure}
		\input{../assets/figures/chain_structure_1}
	\end{figure}
\end{frame}
%%%


%%%
\begin{frame}{The Domino Effect 2}
	\begin{figure}
		\input{../assets/figures/chain_structure_2}
	\end{figure}
\end{frame}
%%%


%%%
\begin{frame}{The Domino Effect 3}
	\begin{figure}
		\input{../assets/figures/chain_structure_3}
	\end{figure}
\end{frame}
%%%


%%%
\begin{frame}{Extending the Chain}
	\begin{figure}[h!]
	\center
		\input{../assets/figures/chain_extension}
	\end{figure}
%Each of these nodes believes that its own block candidate should be added to the blockchain and will ignore those of other network participants.
\end{frame}

%%%

\end{document}